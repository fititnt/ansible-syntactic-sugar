---

# FILE:            {{ role_path }}/tasks/devel-nginx/install.yml
# LICENSE:         Public Domain
#
# SEE:             https://docs.ansible.com/ansible/latest/modules/package_module.html

- name: "devel-nginx | install: prerequisite packages"
  package:
    name: "{{ item.name }}"
    state: "{{ item.state | default('present') }}"
  with_items: "{{ albextras_internal_devel_nginx_prerequisites_packages }}"
  when:
    - "(albextras_internal_devel_nginx_prerequisites_packages is defined)
       and (albextras_internal_devel_nginx_prerequisites_packages[0] is defined)"

- name: "devel-nginx | install | (*nix) install: package install nginx"
  package:
    name: "nginx"
    state: "present"
  # ignore_errors: true
  when:
    - "(albextras_internal_iswindows is undefined)
      or (albextras_internal_iswindows|bool is sameas false)"

- name: "devel-nginx | install | start and enable: nginx"
  service:
    name: nginx
    state: started
    enabled: yes
  when:
    - "(albextras_internal_iswindows is undefined)
      or (albextras_internal_iswindows|bool is sameas false)"